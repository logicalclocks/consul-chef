datacenter = "<%= node['consul']['datacenter'] %>"
domain = "<%= node['consul']['domain'] %>"
data_dir = "<%= node['consul']['data_dir'] %>"
retry_join = <%= @masters %>
enable_local_script_checks = true
performance = {
    raft_multiplier = 1
}

verify_incoming = true
verify_outgoing = true
verify_server_hostname = false
auto_encrypt = {
   allow_tls = true
}
ca_file = "<%= @hops_ca %>"
cert_file = "<%= @certificate %>"
key_file = "<%= @key %>"
ports = {
   http = -1,
   https = <%= node['consul']['http_api_port'] %>,
   server = <%= node['consul']['rpc_port'] %>
}
telemetry = {
   prometheus_retention_time = "<%= node['consul']['metrics']['prometheus_retention_time'] %>",
   disable_hostname = true
}
log_file = "<%= node['consul']['logs_dir'] %>/consul"
log_rotate_max_files = 7